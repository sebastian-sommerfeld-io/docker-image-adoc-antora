= Setup Development Environment

== Requirements Overview
These requirements apply to all docker images on top of their own requirements.

. Image is pushed to DockerHub
. Apply the versioning scheme defined in link:http://docs.cloud.sommerfeld.io/infrastructure-docs/main/GUIDELINES/index.html#_version_tags[Guidelines and Conventions]

== Quality Goals
. Run test, scans and validations automatically with Github Actions
.. Everything inside this repo is linted and validated
.. Docker builds are tested regularly
.. Container images are scanned for vulerabilities
. Development with Gitpod inside a browser is possible.
. Every service runs inside a Docker container.

== Install
This project is designed for development on a Linux machine (preferrably Ubuntu) and needs a local Docker installation.

=== DockerHub Settings
. Go to "link:https://hub.docker.com[hub.docker.com] -> Account Settings -> Security" and set up an Access Token to use with Github Actions.
. Go to "link:https://github.com/sebastian-sommerfeld-io/docker-images[repository "docker-images" on github.com] -> Settings -> Secrets -> Actions and add two secrets to log in to DockerHub in a Github Actions pipeline
.. DOCKERHUB_USER = `sommerfeldio`
.. DOCKERHUB_USER = `<THE_TOKEN_FROM_DOCKERHUB>`

=== Container Scanning with Snyk
In order to use the Snyk Action you will need to have a Snyk API token. More details in https://github.com/snyk/actions#getting-your-snyk-token or you can signup for free at https://snyk.io/login.

. Create a `SNYK_TOKEN` secret in Github the same way you created the DockerHub secrets.

Snyk can be used to break the build when it detects vulnerabilities. In this case we want to `continue-on-error: true` to upload the issues to GitHub Code Scanning.

=== Integrate Slack with Github Actions
Some pipelines send their build status and sometimes other messages to slack. 

. Follow the instructions from https://docs.github.com/en/actions/security-guides/encrypted-secrets#creating-encrypted-secrets-for-a-repository[action `slack-send` -> Technique 2: Slack App]
